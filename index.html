<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>D3 Visualization</title>
  <script src="https://d3js.org/d3.v5.min.js"></script>
</head>
<style>
  .bar-chart {
    background-color: yellow
  }
</style>
<body>
  
  <div>
    <p>LIST</p>
    <ul class="numbers">
    </ul>
  </div>

  <div>
    <p>BAR CHART</p>
  
    <svg class="bar-chart">
    </svg>
  </div>

  <script>

    // item-list
    let arr = [10, 20, 30, 40, 50, 1, 2, 3, 4]  

    // d3.selectAll(".numbers")
    //   .data(arr)
    //   .text((d) => {
    //     return "Number: " + d
    //   })

    let li = d3.select('ul')
      .selectAll("li")
      .data(arr)
      .enter()
      .append("li")
      .text((d) => {
          return "Number: " + d
        })

    // li.exit.remove()

    // bar-chart
        
    let svgWidth = 500
    let svgHeight = 300
      
    // the container
    let svg = d3.select("svg")
      .attr("width", svgWidth)
      .attr("height", svgHeight)

    // scale
    let yScale = d3.scaleLinear()
      .domain([0, d3.max(arr)])
      .range([0, svgHeight])
    
    let barPadding = 5
    let barWidth = (svgWidth / arr.length)
    
    // the bar
    let bar = svg.selectAll("rect")
      .data(arr)
      .enter()
      .append("rect")
      .attr("y", function (d) {
        return svgHeight - yScale(d)
      })
      .attr("height", function (d) {
        return yScale(d)
      })
      .attr("width", (barWidth - barPadding))
      .attr("transform", function (d, i) {
        let x = barWidth * i
        return "translate ("+ x +")"
      })

    // label for bar
    let text = svg.selectAll('text')
      .data(arr)
      .enter()
      .append('text')
      .text((d) => {
        return d
      })
      .attr('y', (d,i) => {
        return svgHeight - d - 5
      })
      .attr('x', (d,i) => {
        return barWidth * i + 10
      })
      .attr('fill', 'red')

  </script>
</body>
</html>